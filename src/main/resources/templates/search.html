<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" type="text/css" th:href="@{css/normalize.css}"/>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/webjars/font-awesome/4.7.0/css/font-awesome.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{css/main.css}"/>
    <title>Search</title>
</head>
<body>
    <th:block th:include="header.html"/>
    <th:block th:include="sub-header.html"/>

    <div class="search">
        <div class="container">
            <h2 th:text="#{booking.search.trains}"></h2>
            <form th:method="get" th:action="@{/search}">
                <div class="row">
                    <div class="col-md-3">
                        <label for="departure">Departure City:</label>
                        <input id="departure" type="text" class="form-control" name="departure">
                    </div>
                    <div class="col-md-3">
                        <label for="arrival">Arrival City:</label>
                        <input id="arrival" type="text" class="form-control" name="arrival">
                    </div>
                    <div class="col-md-3">
                        <label for="date">Date:</label>
                        <input id="date" type="date" class="form-control" name="date">
                    </div>
                    <div class="col-md-3">
                        <button type="submit" class="btn btn-lg btn-info form-control" th:text="#{booking.search}"></button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="container" th:if="${not #lists.isEmpty(trips)}">
        <h2 th:text="'Trains'"></h2>
        <table class="table table-striped table-dark">
            <thead>
            <tr>
                <th>Train Number</th>
                <th>From</th>
                <th>To</th>
                <th>Departure</th>
                <th>Arrival</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="trip : ${trips}">
                <td th:text="${trip.train.trainNumber}"></td>
                <td th:text="${trip.route.departureStation.city}"></td>
                <td th:text="${trip.route.arrivalStation.city}"></td>
                <td th:text="${trip.departureDate + ' ' + #temporals.format(trip.departureTime, 'HH:mm')}"></td>
                <td th:text="${trip.departureDate + ' ' + #temporals.format(trip.departureTime.plusMinutes(trip.route.durationInMinutes), 'HH:mm')}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <th:block th:include="footer.html"/>

    <script th:src="@{/webjars/jquery/3.2.1/jquery.min.js}"></script>
    <script th:src="@{/webjars/popper.js/1.12.9/umd/popper.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/4.0.0/js/bootstrap.min.js}"></script>
</body>
</html>